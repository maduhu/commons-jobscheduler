<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta content="text/html; charset=UTF-8" http-equiv="content-type" />
<meta content="text/css; charset=UTF-8" http-equiv="Content-Style-Type" />
<meta content="SOS GmbH" name="author" />
<meta content="Software- und Organisations- Service GmbH (SOS), Berlin" name="publisher" />
<meta content="Copyright Software- und Organisations- Service GmbH (SOS), Berlin. All rights reserved." name="copyright" />
<title>JobSchedulerSynchronizeJobChains - JITL - JobScheduler Integrated Template Library</title>
<style type="text/css">

      body { background-color:#FFFFFF; margin-left:20px; font-family:verdana,arial,sans-serif;font-size:10pt; }

      ul    { margin-top: 0px; margin-bottom: 10px; margin-left: 0; padding-left: 1em;
              font-weight:300; }
      li    { margin-bottom: 10px; }

      h1    { font-family:verdana,arial,sans-serif;font-size:10pt; font-weight:600; }

      /* table { width:100%; background-color:#F3F4F4; } dunkler */
      /* table { width:100%; background-color:#F5FAFA; } heller */

      table.navi {background-color:#FFFFFF }

      table { font-family:verdana,arial,sans-serif;font-size:10pt;
              width:100%;
              background-color:#F9FCFC;
            }

      td {
        padding: 2px 2px 2px 2px;
        vertical-align:top; text-align: left;
        font-family:verdana, arial, sans-serif;font-size:10pt;
      }

      table.box        { border-width:2px; border-style:solid; border-color:#C0C0C0; }
      table.boxRelease { border-color:#C0C0C0;
                         border-left-width:2px;   border-left-style:solid;
                         border-right-width:2px;  border-right-style:solid;
                         border-top-width:1px;    border-top-style:none;
                         border-bottom-width:2px; border-bottom-style:solid;
                       }

      td.td1     {width:11%; }
      td.td2     {width:12%; }
      td.td3     {width:79%; }
      td.td2_3   {width:87%; }

      td.td31    {width:20%; }
      td.td32    {width:80%; }

      td.td31_32 {width:100%; }

      table.resource   { background-color:#DCDCDC; }

      th.resource1     { background-color:#F3F4F4;
                         text-align: left;
                         font-family:verdana,arial,sans-serif;font-size:10pt;
                         font-weight:300;
                         width:20%;
                       }
      th.resource2     { background-color:#F3F4F4;
                         text-align: left;
                         font-family:verdana,arial,sans-serif;font-size:10pt;
                         font-weight:300;
                         width:10%;
                       }
      th.resource3     { background-color:#F3F4F4;
                         text-align: left;
                         font-family:verdana,arial,sans-serif;font-size:10pt;
                         font-weight:300;
                         width:10%;
                       }
      th.resource2_3   { background-color:#F3F4F4;
                         text-align: left;
                         font-family:verdana,arial,sans-serif;font-size:10pt;
                         font-weight:300;
                         width:20%;
                       }
      th.resource4     { background-color:#F3F4F4;
                         text-align: left;
                         font-family:verdana,arial,sans-serif;font-size:10pt;
                         font-weight:300;
                         width:60%;
                       }

      td.resource1     { color:#009900;
                         background-color:#F3F4F4;
                         width:25%;
                       }
      td.resource2     { color:#336699;
                         background-color:#F3F4F4;
                         width:10%;
                       }
      td.resource3     { color:#336699;
                         background-color:#F3F4F4;
                         width:10%;
                       }
      td.resource2_3   { color:#336699;
                         background-color:#F3F4F4;
                         width:20%;
                       }
      td.resource4     { color:#336699;
                         background-color:#F3F4F4;
                         width:60%;
                       }

      table.section   { background-color:#DCDCDC; }

      td.section1     { color:#009900;
                        background-color:#F3F4F4;
                        width:20%;
                      }
      td.section2     { color:#336699;
                        font-weight:300;
                        background-color:#F3F4F4;
                        width:80%;
                      }

      .section        {color:#000000; font-weight:600; }                         /* schwarze Schrift, fett */
      .label          {color:#000000; font-weight:300; }
      .labelSmall     {color:#000000; font-weight:300; font-size:8pt; }          /* schwarze Schrift */
      .sourceName     {color:#009900; font-weight:300; }                         /* gr&uuml;ne Schrift */
      .sourceNameBold {color:#009900; font-weight:600; }                         /* gr&uuml;ne Schrift */
      .desc           {color:#336699; font-weight:300; }                         /* blaue Schrift */

      .code           {color:#000000; font-weight:300; font-family:"Courier New",sans-serif;font-size:10pt; }      /* Schrift f&uuml;r XML-Code */

      font.section        {color:#000000; font-weight:600; }                      /* schwarze Schrift, fett */
      font.label          {color:#000000; font-weight:300; }                      /* schwarze Schrift */
      font.labelSmall     {color:#000000; font-weight:300; font-size:8pt; }       /* schwarze Schrift */
      font.sourceName     {color:#009900; font-weight:300; }                      /* gr&uuml;ne Schrift */
      font.sourceNameBold {color:#009900; font-weight:600; }                      /* gr&uuml;ne Schrift */
      font.desc           {color:#336699; font-weight:300; }                      /* blaue Schrift */

      font.code           {color:#000000; font-weight:300; font-family:"Courier New",sans-serif;font-size:10pt; }      /* Schrift f&uuml;r XML-Code */
      .tooltip
       {
        position:absolute;
        width:400px; height:120px;
        display:none;
        background-color:#FFFFFF;
        border:1px solid;
        border-color:#FF6347;
        color:#000000;
        font-weight:300
       }

      /*** LINK Formatierungen ***/

      	a													{ font-weight:600; text-decoration:none; font-size:10pt; }

      /* Links Navigation */
	      a.navi:link								{ color:#FF9900; font-weight:600; font-size:12pt;}
	      a.navi:visited						{ color:#FF9900; font-weight:600; font-size:12pt;}
	      a.navi:hover							{ color:#FFCC00; font-weight:600; font-size:12pt;}
	      a.navi:active							{ color:#FF6347; font-weight:600; font-size:12pt;}

      /* Links f&uuml;r Sprachumschaltung */
	      a.lang								    { color:#660066; font-weight:600; font-size:10pt; text-decoration:underline; }

      /* Links im Doku-Text */
      /*a.doc:link								    { color:#663333; font-weight:300;}
      	a.doc:visited									{ color:#663333; font-weight:300;} */
      	a.doc:link								    { color:#FF9900; font-weight:300;}
      	a.doc:visited									{ color:#CC3300; font-weight:300;}
      	a.doc:hover										{ color:#FF9900; font-weight:300;}
      	a.doc:active									{ color:#FF6347; font-weight:300;}

      /* Mail-Verweis */
      	a.mail    						    { color:#FF9900; font-weight:300;}

    </style>
<script type="text/javascript">

  var wmtt = null;
      document.onmousemove = updateWMTT;
    var currentLanguage = "en";
    
    function setCurrentLanguage (l) {
        currentLanguage = l;
    }
    
      function updateWMTT(e) {
    var x = (document.all) ? window.event.x + document.body.scrollLeft : e.pageX;
    var y = (document.all) ? window.event.y + document.body.scrollTop  : e.pageY;
        if (wmtt != null) {
          wmtt.style.left = (x + 20) + "px";
          wmtt.style.top 	= (y + 20) + "px";
        }
      }

      function showWMTT(id) {
        wmtt = document.getElementById(id);
        wmtt.style.display = "block"
       }

      function hideWMTT() {
        wmtt.style.display = "none";
      }

      function select_lang( default_lang ) {

        var lang;
        if (default_lang == '' ) {
          lang = 'en';
        } else {
          lang = default_lang;
        }

        if( window.location.hash.search( /(de|en)/ ) != -1 ) lang = window.location.hash.slice(1);
        switch_lang( lang );
      }

      function switch_lang( lang ) {
        if ( lang == 'de' ) {
        currentLanguage = 'de';
          document.getElementById('lang_de').style.display = '';
          document.getElementById('lang_en').style.display = 'none';
        } else {
        currentLanguage = 'en';
          document.getElementById('lang_en').style.display = '';
          document.getElementById('lang_de').style.display = 'none';
        }
      }

      function show_div(id, lang) {
        if ( lang == 'de' ) {
          documentation_id = 'documentation_de';
          firstRelease_id  = 'firstRelease_de';
          resources_id     = 'resources_de';
          configuration_id = 'configuration_de';
          genXML_id        = 'genXML_de';
        } else {
          documentation_id = 'documentation_en';
          firstRelease_id  = 'firstRelease_en';
          resources_id     = 'resources_en';
          configuration_id = 'configuration_en';
          genXML_id        = 'genXML_en';
        }

        try {
          if ( id == 'all' ) {
            if ( document.getElementById(documentation_id)) { document.getElementById(documentation_id).style.display  = ''; }
            if ( document.getElementById(firstRelease_id))  { document.getElementById(firstRelease_id).style.display   = ''; }
            if ( document.getElementById(resources_id))     { document.getElementById(resources_id).style.display      = ''; }
            if (document.getElementById(configuration_id))  { document.getElementById(configuration_id).style.display  = ''; }
            hide_div(genXML_id);
          } else {
            switch (id) {
              case  'documentation':
                if ( document.getElementById('previousRelease_' + lang) ) { hide_div('previousRelease_' + lang); }
                hide_div(firstRelease_id);
                hide_div(resources_id);
                hide_div(configuration_id);
                hide_div(genXML_id);
                if (document.getElementById(documentation_id)) {
                  document.getElementById(documentation_id).style.display = '';
                } else {
                  if ( lang == 'de' ) {
                    alert( 'Für diesen Job gibt es keine Dokumentation' );
                  } else {
                    alert( 'There is no documentation for this job.' );
                  }
                }
                break;
              case  'firstRelease':
                hide_div(documentation_id);
                hide_div(resources_id);
                hide_div(configuration_id);
                hide_div(genXML_id);
                if (document.getElementById(firstRelease_id)) {
                  document.getElementById(firstRelease_id).style.display = '';
                } else {
                  if ( lang == 'de' ) {
                    alert( 'Für diesen Job gibt es keine Releases.' );
                  } else {
                    alert( 'There are no releases for this job.' );
                  }
                }
                break;
              case  'resources':
                hide_div(documentation_id);
                if ( document.getElementById('previousRelease_' + lang) ) { hide_div('previousRelease_' + lang); }
                hide_div(firstRelease_id);
                hide_div(configuration_id);
                hide_div(genXML_id);
                if (document.getElementById(resources_id)) {
                  document.getElementById(resources_id).style.display = '';
                } else {
                  if ( lang == 'de' ) {
                    alert( 'Für diesen Job gibt es keine Ressourcen.' );
                  } else {
                    alert( 'There are no resources for this job.' );
                  }
                }
                break;
              case  'configuration':
                hide_div(documentation_id);
                if ( document.getElementById('previousRelease_' + lang) ) { hide_div('previousRelease_' + lang); }
                hide_div(firstRelease_id);
                hide_div(resources_id);
                hide_div(genXML_id);
                if (document.getElementById(configuration_id)) {
                  document.getElementById(configuration_id).style.display = '';
                } else {
                  if ( lang == 'de' ) {
                    alert( 'Für diesen Job gibt es keine Konfiguration' );
                  } else {
                    alert( 'There is no configuration for this job.' );
                  }
                }
                break;
              case  'genXML':
                hide_div(documentation_id);
                if ( document.getElementById('previousRelease_' + lang) ) { hide_div('previousRelease_' + lang); }
                hide_div(firstRelease_id);
                hide_div(resources_id);
                hide_div(configuration_id);
                document.getElementById(genXML_id).style.display = '';
                break;
            }
          }
        }
        catch(x){
          alert('show_div : '+x.message);
         }
      }

      function hide_div( id ) {
        if ( document.getElementById(id) ) {
          try {
            document.getElementById(id).style.display = 'none';
          }
          catch(x) {
            alert('hide_div : '+x.message);
          }
        }
      }

      function showPreviousReleases( lang ) {

        ref = "javascript:hidePreviousReleases('" + lang + "')";
        if ( lang == "de" ) {
          linkTxt = 'Nur letztes Release anzeigen';
        } else {
          linkTxt = 'Show most recent Release';
        }

        document.getElementById('previousRelease_' + lang).style.display = '';
        document.getElementById('releaseLink_' + lang).innerHTML = linkTxt;
        document.getElementById('releaseLink_' + lang).href = ref;
      }

      function hidePreviousReleases( lang ) {

        document.getElementById('previousRelease_' + lang).style.display = 'none';
        ref = "javascript:showPreviousReleases('" + lang + "')";
        if ( lang == "de" ) {
          linkTxt = 'Ältere Releases anzeigen';
        } else {
          linkTxt = 'Show previous Releases';
        }

        document.getElementById('releaseLink_' + lang).innerHTML = linkTxt;
        document.getElementById('releaseLink_' + lang).href = ref;
      }

      function genXML( lang ) {
         show_div('genXML',lang);
      }

      function check_banner_gifs() {

        var gifs = document.getElementsByTagName("img");
        var gifs_complete = true;
        var gifs_length   = gifs.length;
        var i = 0;
        while( i != gifs_length ) {
          if( !gifs[i].complete ) {
            gifs_complete = false;
            break;
          }
          i++;
        }
        if( !gifs_complete ) {
          i = 0;
          while( i != gifs_length ) {

            try {
              gifs[i].parentNode.innerHTML = gifs[i].title;
            }
            catch(E) { break; }
          }
          i++;
        }
      }

      </script>
</head>
<body onload="check_banner_gifs();select_lang('en');">
<div id="lang_de">
<table width="100%" class="navi">
<tr>
<td nowrap="nowrap">
<a href="#" class="navi" onclick="show_div('documentation','de');return false;">Dokumentation</a>
                        |
                    <a href="#" class="navi" onclick="show_div('firstRelease','de');return false;">
                            Releases
                        </a>
                        |
                    <a href="#" class="navi" onclick="show_div('resources','de');return false;">Ressourcen</a>
                        |
                    <a href="#" class="navi" onclick="show_div('configuration','de');return false;">Konfiguration</a>
                        |
                    <a href="#" class="navi" onclick="show_div('all','de');return false;">Alles&nbsp;anzeigen</a>
</td>
<td style="text-align:center">
<a href="#" class="navi" onclick="genXML('de');return false;">Job&nbsp;generieren</a>&nbsp;&nbsp;</td>
<td style="text-align:right">
<a class="lang" href="javascript:switch_lang('de');">
<img title="deutsch" alt="deutsch" border="0" src="banner_german.gif" />
</a>&nbsp;&nbsp;<a class="lang" href="javascript:switch_lang('en');">
<img title="english" alt="english" border="0" src="banner_english.gif" />
</a>
</td>
</tr>
</table>
<p />
<table class="box" id="documentation_de">
<tr>
<td class="td1">
<span class="section">Dokumentation</span>
</td>
<td class="td2">&nbsp;</td>
<td class="td3">
<span class="sourceNameBold">JobSchedulerSynchronizeJobChains</span>&nbsp;&nbsp;<span class="desc">Synchronize Job Chains</span>
    <div>
      <b>Funktionalit&auml;t</b>
      <br />
      <ul>
        <li>
<p>Synchronisierung</p>
<p>
          Der Job synchronisiert Auftr&auml;ge mehrerer Job-Ketten, die unterschiedlich lange Verarbeitungszeiten erfordern
          und an bestimmten Job-Knoten aufeinander warten sollen. Der Job unterst&uuml;tzt folgendes Szenario:
          </p>
<p>
          <pre>
          Job-Kette   A    B    C
          ------------------------
          Job-Knoten  A1   B1   C1
          Job-Knoten     Merge
          Job-Knoten  A2   B2   C2
          </pre>
          </p>
        </li>
<li>
<p>Split &amp; Merge</p>
<p>
Einer Synchronisierung wird eine Split Operation vorangestellt, um ein <em>split &amp; merge</em> Szenario
          herzustellen, in dem z.B. ein Job drei Auftr&auml;ge f&uuml;r die Job-Ketten A, B und C zur parallelen Ausf&uuml;hrung erzeugt:
          </p>
<p>
          <pre>
          Job            Split
          ------------------------
          Auftrag     a    b    c
          ------------------------
          Job-Kette   A    B    C
          ------------------------
          Job-Knoten  A1   B1   C1
          Job-Knoten     Merge
          Job-Knoten  A2   B2   C2
          </pre>
</p>
</li>
        <li>
<p>Split &amp; Merge &amp; Split &amp; Merge</p>
<p>
Einer Synchronisierung wird wie im <em>Split &amp; Merge</em> Beispiel eine Split Operation vorangestellt,
          dann erfolgt ein weiterer Split, ein weiterer Merge und alles Endet in einem Job.
          </p>
<p>
          <pre>
          Job            Split
          ------------------------
          Order       a    b    c
          ------------------------
          Job Chain   A    B    C
          ------------------------
          Job Node    A1   B1   C1
          Job Node       Merge1
          Job Node    A2   B2   C2
          Job Node       Merge2
          Job Node    A3
</pre>
</p>                  
<li class="sos-list-item">
<p>Split &amp; Merge in one chain</p>
<p>
Ein Split &amp; Merge kann auch innerhalb einer einzigen Kette durchgef&uuml;hrt werden,
          indem die beim Split neu erzeugten Auftr&auml;ge in sonst nicht erreichbare Zust&auml;nde der
          Jobkette gesetzt werden.
          </p>
<p>
          <pre>                  
          ------------------------
          Job Chain   A    A    A
          ------------------------
          Job Node    A1
          Job Node    B1*                  
          Job Node    C1   C2   C3
          Job Node       Merge
          Job Node    D1
          </pre>
          * Am Ende von B1 wird der Auftrag wie unten beschrieben geteilt.
</p>
        </li>
        </li>
      </ul>
      <b>Erl&auml;uterungen</b>
      <ul>
        <li>
          Die Job-Ketten A, B und C verarbeiten Auftr&auml;ge unterschiedlicher Dauer. 
        </li>
        <li>
          Die Auftr&auml;ge aller drei Job-Ketten sollen in einem Job-Knoten synchronisiert werden, 
          d.h. aufeinander warten bis jeweils ein Auftrag aus jeder Job-Kette den Job-Knoten <em>Merge</em> erreicht hat.
          Solange aus einer der Job-Ketten ein Auftrag fehlt, werden alle anderen Auftr&auml;ge zur&uuml;ckgesetzt, 
          d.h. sie warten vor dem Job-Knoten <em>Merge</em>.
        </li>
        <li>
          Erst wenn aus jeder Job-Kette ein Auftrag vorhanden ist, werden alle drei Auftr&auml;ge nach dem Job-Knoten
          <em>Merge</em> fortgesetzt. Dabei spielt die Reihenfolge, in der die Auftr&auml;ge am Job-Knoten <em>Merge</em>
          eintreffen, keine Rolle.
        </li>
        <li>
          Beachten Sie, dass mit dem JobScheduler derselbe Job in mehreren Job-Ketten verwendet werden kann.
        </li>
        <li>
          Nach dem Merge werde alle parallelen Auftr&auml;ge in ihren n&auml;chsten Zust&auml;nden fortgesetzt. Soll nach
          dem Merge nur noch sequentiell in einer einzigen Kette fortgesetzt werden, so sind die anderen Ketten mit dem
          Merge zu beenden.                  
        </li>
      </ul>
      <br />
      <b>Konfiguration</b>
      <ul>
        <li>
          Erstellen Sie z.B. einen Job <em>JobSynchronize</em> aus der o.g. Implementierung mit diesem Inhalt:
          <pre>
&lt;job order="yes"
     stop_on_error="no"&gt;
    &lt;script java_class="sos.scheduler.job.JobSchedulerSynchronizeJobChains"
            language="java"/&gt;
    &lt;run_time/&gt;
&lt;/job&gt;
          </pre>
        </li>
        <li>
          F&uuml;gen Sie jeder Job-Kette, f&uuml;r die Sie Auftr&auml;ge synchronisieren m&ouml;chten,
          einen Job-Knoten mit dem Synchronisierungs-Job hinzu:
          <pre>
&lt;job_chain orders_recoverable="yes" visible="yes"&gt;
    &lt;job_chain_node state="A1"
                    job="Job1"
                    next_state="synchronize"
                    error_state="error"/&gt;
    &lt;job_chain_node state="synchronize"
                    job="JobSynchronize"
                    next_state="A2"
                    error_state="error"/&gt;
    &lt;job_chain_node state="A2"
                    job="Job2"
                    next_state="success"
                    error_state="error"/&gt;
    &lt;job_chain_node state="success"/&gt;
    &lt;job_chain_node state="error"/&gt;
&lt;/job_chain&gt;
          </pre>
          <p>
          Sie k&ouml;nnen den Synchronisierungs-Job in einen beliebigen Job-Knoten der
          jeweiligen Job-Kette platzieren.
          Sie m&uuml;ssen dazu denselben Job-Namen f&uuml;r den Synchronisierungs-Job verwenden,
          allerdings k&ouml;nnen sie den Job-Knoten an beliebigen Knoten der jeweiligen Job-Ketten
          einsetzen und mit beliebigen Status versehen.
        </p>
</li>
        <li>
          Um den Durchsatz zu verbessern k&ouml;nnen Sie zulassen, dass der Synchronisierungs-Job in mehreren Prozessen ausgef&uuml;hrt werden kann:
          <pre>
&lt;job order="yes"
     tasks="3"
     stop_on_error="no"&gt;
     ...
&lt;/job&gt;
          </pre>
          In diesem Beispiel wird der Synchronisierungs-Job in bis zu 3 parallelen Instanzen ausgef&uuml;hrt.
        </li>
        <li>
          Falls Sie erzwingen m&ouml;chten, dass mehr als ein Auftrag aus einer Job-Kette vorhanden sein muss,
          um die Synchronisierungsbedingungen zu erf&uuml;llen, dann k&ouml;nnen Sie die Anzahl der erwarteten
          Auftr&auml;ge pro Job-Kette angeben. Verwenden Sie hierzu f&uuml;r den Synchronisierungs-Job den Parameter <em>[job_chain]_required_orders</em>, 
          z.B. <em>A_required_orders</em> wenn der Name der Job-Kette <em>A</em> lautet.
        </li>
        <li>
        <p>
          Falls Sie mehrere Gruppen von Job-Ketten jeweils unabh&auml;ngig voneinander synchronisieren m&ouml;chten,
          dann verwenden Sie unterschiedliche Namen f&uuml;r den Synchronisierungs-Job pro Gruppe.
        </p>
        </li>
        <li>
<p>
          Konfiguration eines Split Jobs
          <p>
          Dieser Job steht am Beginn eines <em>split &amp; merge</em> Szenarios und erzeugt mehrere Auftr&auml;ge
          zur parallelen Ausf&uuml;hrung in Job-Ketten: 
          <pre>
&lt;job&gt;
    &lt;script language="shell"&gt;&lt;![CDATA[
        echo %SCHEDULER_JOB_NAME%
    ]]&gt;&lt;/script&gt;
    &lt;run_time/&gt;
    &lt;commands on_exit_code="success"&gt;
        &lt;order job_chain="ChainA" replace="yes"&gt;
            &lt;params&gt;
                &lt;copy_params from="task"/&gt;
            &lt;/params&gt;
        &lt;/order&gt;
        &lt;order job_chain="ChainB" replace="yes"&gt;
            &lt;params&gt;
                &lt;copy_params from="task"/&gt;
            &lt;/params&gt;
        &lt;/order&gt;
        &lt;order job_chain="ChainC" replace="yes"&gt;
            &lt;params&gt;
                &lt;copy_params from="task"/&gt;
            &lt;/params&gt;
        &lt;/order&gt;
    &lt;/commands&gt;
&lt;/job&gt;
          </pre>
          </p>
          </p>
        </li>
      </ul>
      <br />
      <b>Fehlerbehandlung</b> 
      <ul>
        <li>
          Beachten Sie bitte, dass einzelne Auftr&auml;ge f&uuml;r eine beliebige Dauer ausgesetzt bleiben
          solange nicht Auftr&auml;ge von allen synchronisierten Job-Ketten vorhanden sind.
        </li>
        <li>
          Falls Sie veranlassen m&ouml;chten, dass Auftr&auml;ge nach einer bestimmten Zeitspanne mit Fehler enden
          sofern sie nicht synchronisiert werden konnten, dann k&ouml;nnen Sie diese Verarbeitungsweise und 
          ein maximales Wiederholungsintervall angeben:
          <pre>
&lt;job order="yes"
     stop_on_error="no"&gt;
    &lt;params&gt;
      &lt;param name="setback_type" value="setback"/&gt;
    &lt;/params&gt;
    &lt;script java_class="sos.scheduler.job.JobSchedulerSynchronizeJobChains"
            language="java"/&gt;
    &lt;delay_order_after_setback setback_count="1"
                               is_maximum="no"
                               delay="00:10"/&gt;
    &lt;delay_order_after_setback setback_count="12"
                               is_maximum="yes"
                               delay="00:10"/&gt;
    &lt;run_time/&gt;
&lt;/job&gt;
          </pre>
          Mit dieser Parametrisierung wird eine befristete Lebensdauer von Auftr&auml;gen konfiguriert.
          In diesem Beispiel wird der Auftrag alle 10 Minuten wiederholt vom Synchronisierungs-Job ausgef&uuml;hrt.
          Ist die 12. Wiederholung nicht erfolgreich, dann wird der Auftrag als fehlerhaft gehandhabt und
          mit dem Job-Knoten fortgesetzt, der dem <em>error_state=</em> Attribut des Synchronisierungs-Jobs
          zugewiesen ist.
        </li>
      </ul>
    </div>
  </td>
</tr>
</table>
<table class="box" id="job_de">
<tr>
<td class="td1">
<span class="section">Class</span>
</td>
<td class="td2">
<span class="label">Name/ Titel</span>
</td>
<td class="td3">
<span class="sourceNameBold">JobSchedulerSynchronizeJobChains</span>&nbsp;&nbsp;<span class="desc">Synchronize Job Chains</span>
</td>
</tr>
<tr>
<td class="td1">&nbsp;</td>
<td onmouseout="hideWMTT()" class="td2" onmouseover="showWMTT('ttorderControl_de')">Auftragssteuerung<span class="tooltip" id="ttorderControl_de">Ein Auftrag aktiviert die Verarbeitung einer Job-Kette. Er enth&auml;lt Parameter f&uuml;r einen oder mehrere Jobs einer Job-Kette.</span>
</td>
<td class="td3">
<span class="desc">Dieser Job l&auml;uft auftragsgesteuert ab.</span>
</td>
</tr>
<tr>
<td class="td1">&nbsp;</td>
<td onmouseout="hideWMTT()" class="td2" onmouseover="showWMTT('tttasks_de')">
                        Tasks
                        <span class="tooltip" id="tttasks_de">zeigt die maximale Anzahl der Tasks an, die ein Job parallel ausf&uuml;hren kann</span>
</td>
<td class="td3">
<span class="desc">1</span>
</td>
</tr>
<tr>
<td class="td1">&nbsp;</td>
<td onmouseout="hideWMTT()" class="td2" onmouseover="showWMTT('ttScript_de')">Skript<span class="tooltip" id="ttScript_de">Ein Skript enth&auml;lt die Implementierung eines Jobs. Skripte k&ouml;nnen mit den Methoden des Job Scheduler API in den Sprachen  Java, Javascript, Perlscript und VBScript implementiert werden. Alternativ zur Implementierung mit Skripten k&ouml;nnen Jobs zur Ausf&uuml;hrung beliebiger Programme und Kommandodateien konfiguriert werden.</span>
</td>
<td class="td3">
<ul>
<li>Sprache: <span class="sourceName">java</span>
</li>
<li>Name der Java-Klasse: <span class="sourceName">sos.scheduler.job.JobSchedulerSynchronizeJobChains</span>
</li>
<li>
<a class="doc" onclick="show_div('resources','de');return false;" href="#1">
<span style="font-family:Arial;font-size:12px;">&rarr;</span>&nbsp;Ressource: <span class="sourceName" />
</a>
</li>
</ul>
</td>
</tr>
</table>
<table style="$DisplayStyle" class="box" id="configuration_de">
<tr>
<td class="td1">
<span class="section">Konfiguration</span>
</td>
<td class="td2">&nbsp;</td>
<td class="td3">&nbsp;</td>
</tr>
<tr>
<td class="td1">
<a name="job_parameter_de" />&nbsp;</td>
<td onmouseout="hideWMTT()" class="td2" onmouseover="showWMTT('ttparams_de')">Parameter</td>
<td class="td3">
<table cellspacing="1" cellpadding="0" class="section">
<tr>
<td class="section1">
<a name="_de" />
<a name="job_chain_state_required_orders_de" />
<a name="job_chain_state_required_orders_" />
<span class="sourceName">job_chain_state_required_orders</span>
</td>
<td class="section2">
<b>No of required orders</b>
</td>
</tr>
<tr>
<td class="section1">
<span class="labelSmall">[optional]</span>
</td>
<td class="section2">
<span class="desc">
				          <b>No of required orders</b>
          <div>
<p>
            Der Parameter benennt f&uuml;r einen State  einer Job-Kette die Anzahl eingereihter Auftr&auml;ge, die verlangt wird,
            um die Bedingungen einer Synchronisierung zu erf&uuml;llen. Ohne Angabe des Parameters wird ein Auftrag erwartet.
            </p>
<p>
            Werden zum Beispiel drei Auftr&auml;ge erwartet, dann werden nach Vorliegen dieser Anzahl 
            alle drei Auftr&auml;ge simultan fortgesetzt.
            </p>
<p>
            Der Name des Parameters setzt sich aus dem Namen der jeweiligen Job-Kette, einem <em>";"</em>, dem Namen des Jobknoten und dem Suffix <em>_required_orders</em> zusammen.
          </p>
</div>
        </span>
<p>
<table>
<tr>
<td />
</tr>
<tr>
<td>Default-Value: 1</td>
</tr>
</table>
</p>
</td>
</tr>
<tr>
<td class="section1">
<a name="_de" />
<a name="job_chain_required_orders_de" />
<a name="job_chain_required_orders_" />
<span class="sourceName">job_chain_required_orders</span>
</td>
<td class="section2">
<b>No of required orders</b>
</td>
</tr>
<tr>
<td class="section1">
<span class="labelSmall">[optional]</span>
</td>
<td class="section2">
<span class="desc">
				          <b>No of required orders</b>
          <div>
<p>
            Der Parameter benennt f&uuml;r eine Job-Kette die Anzahl eingereihter Auftr&auml;ge, die verlangt wird,
            um die Bedingungen einer Synchronisierung zu erf&uuml;llen. Ohne Angabe des Parameters wird ein Auftrag erwartet.
            </p>
<p>
            Werden zum Beispiel drei Auftr&auml;ge erwartet, dann werden nach Vorliegen dieser Anzahl 
            alle drei Auftr&auml;ge simultan fortgesetzt.
            </p>
<p>
            Der Name des Parameters setzt sich aus dem Namen der jeweiligen Job-Kette und dem Suffix <em>_required_orders</em> zusammen.
          </p>
</div>
        </span>
<p>
<table>
<tr>
<td>DataType: SOSOptionInteger</td>
</tr>
<tr>
<td>Default-Value: 1</td>
</tr>
</table>
</p>
</td>
</tr>
<tr>
<td class="section1">
<a name="_de" />
<a name="required_orders_de" />
<a name="required_orders_" />
<span class="sourceName">required_orders</span>
</td>
<td class="section2">
<b>No of required orders</b>
</td>
</tr>
<tr>
<td class="section1">
<span class="labelSmall">[optional]</span>
</td>
<td class="section2">
<span class="desc">
				          <b>No of required orders</b>
          <div>
<p>
            Der Parameter benennt f&uuml;r alle Job-Ketten die Anzahl eingereihter Auftr&auml;ge pro Job-Kette, die verlangt wird,
            um die Bedingungen einer Synchronisierung zu erf&uuml;llen. Ohne Angabe des Parameters wird ein Auftrag erwartet.
            </p>
<p>
            Werden zum Beispiel drei Auftr&auml;ge erwartet, dann werden nach Vorliegen dieser Anzahl 
            alle drei Auftr&auml;ge simultan fortgesetzt.
            </p>
<p>
            Der Parameter wird nur ausgewertet, falls kein Parameter <code>[job_chain]_required_orders</code> f&uuml;r die aktuelle Job-Kette benannt wurde.
          </p>
</div>
        </span>
<p>
<table>
<tr>
<td />
</tr>
<tr>
<td>Default-Value: 1</td>
</tr>
</table>
</p>
</td>
</tr>
<tr>
<td class="section1">
<a name="_de" />
<a name="setback_type_de" />
<a name="setback_type_" />
<span class="sourceName">setback_type</span>
</td>
<td class="section2">
<b>SetBack Typ</b>
</td>
</tr>
<tr>
<td class="section1">
<span class="labelSmall">[optional]</span>
</td>
<td class="section2">
<span class="desc">
		          <b>SetBack Typ</b>
          <div>
<p>
            Dieser Parameter kann verwendet werden, um zwischen <em>suspend</em> und <em>setback</em>
            f&uuml;r die Behandlung wartender Auftr&auml;ge auszuw&auml;hlen:
            </p>
            <ul>
              <li>
<p>suspend
              </p>
<p>
                Auftr&auml;ge werden ausgesetzt, d.h. falls die Synchronisierungsbedingungen nicht erf&uuml;llt sind,
                verbleiben die Auftr&auml;ge f&uuml;r unbestimmte Dauer in diesem Zustand
                bis sie durch den Synchronisierungs-Job fortgesetzt werden.
                </p>
<p>
                Alternativ k&ouml;nnen solche Auftr&auml;ge manuell in der Web-Oberfl&auml;che fortgesetzt werden.
                </p> 
              </li>
              <li>
<p>setback</p>
<p>
                Auftr&auml;ge werden f&uuml;r das mit den Parametern <code>setback_interval</code> und <code>setback_count</code>
                bestimmte Intervall und dessen maximale H&auml;ufigkeit wiederholt und gehen nach &Uuml;berschreiten
                des Maximums in einen Fehlerzustand &uuml;ber.
                </p>
<p>
                Alternativ k&ouml;nnen solche Auftr&auml;ge manuell in der Web-Oberfl&auml;che fortgesetzt werden.
								</p>
              </li>
            </ul>
          </div>
        </span>
<p>
<table>
<tr>
<td>DataType: SOSOptionSetBack</td>
</tr>
<tr>
<td>Default-Value: suspend</td>
</tr>
</table>
</p>
</td>
</tr>
<tr>
<td class="section1">
<a name="_de" />
<a name="setback_interval_de" />
<a name="setback_interval_" />
<span class="sourceName">setback_interval</span>
</td>
<td class="section2">
<b>SetBack Intervall</b>
</td>
</tr>
<tr>
<td class="section1">
<span class="labelSmall">[optional]</span>
</td>
<td class="section2">
<span class="desc">
		          <b>SetBack Intervall</b>
          <div>
<p>
            Dieser Parameter kann in Verbindung mit dem Parameter <code>setback_type</code> und dessen Wert <em>setback</em>
            verwendet werden, um das Intervall in Sekunden zu bestimmen,
            f&uuml;r das Auftr&auml;ge zur&uuml;ckgestellt werden, f&uuml;r die die Synchronisierungsbedingungen nicht erf&uuml;llt sind.
            </p>
<p>
            Per Voreinstellung wird der <code>setback_type</code> <em>suspend</em> verwendet, der Auftr&auml;ge aussetzt
            und daher kein Wiederholungsintervall ben&ouml;tigt.
            </p>
<p>
            Aus Gr&uuml;nden der Sichtbarkeit wird empfohlen diesen Wert anhand der Job-Konfiguration
            mit dem Element &lt;delay _order_after_setback&gt; zu bestimmen.
          </p>
</div>
        </span>
<p>
<table>
<tr>
<td>DataType: SOSOptionInteger</td>
</tr>
<tr>
<td>Default-Value: 600</td>
</tr>
</table>
</p>
</td>
</tr>
<tr>
<td class="section1">
<a name="_de" />
<a name="setback_count_de" />
<a name="setback_count_" />
<span class="sourceName">setback_count</span>
</td>
<td class="section2" />
</tr>
<tr>
<td class="section1">
<span class="labelSmall">[optional]</span>
</td>
<td class="section2">
<span class="desc">
          <div>
<p>
            Der Parameter kann in Verbindung mit dem Parameter <code>setback_type</code> und dessen Wert <em>setback</em>
            verwendet werden, um die max. Anzahl wiederholter Ausf&uuml;hrungen
            von Auftr&auml;gen zu bestimmen, f&uuml;r die die Synchronisierungsbedingungen nicht erf&uuml;llt sind.
            </p>
<p>
            Per Voreinstellung wird der <code>setback_type</code> <em>suspend</em> verwendet, der Auftr&auml;ge aussetzt
            und daher kein Wiederholungsintervall ben&ouml;tigt.
            </p>
<p>
            Aus Gr&uuml;nden der Sichtbarkeit wird empfohlen diesen Wert anhand der Job-Konfiguration
            mit dem Element &lt;delay _order_after_setback&gt; zu bestimmen.
          </p>
</div>
         </span>
<p>
<table>
<tr>
<td>DataType: SOSOptionInteger</td>
</tr>
<tr>
<td>Default-Value: unbounded</td>
</tr>
</table>
</p>
</td>
</tr>
</table>
</td>
</tr>
</table>
<table style="$DisplayStyle" class="box" id="genXML_de">
<tr>
<td class="td1">
<span class="section">XML</span>
</td>
<td colspan="2" class="td2_3">Code zur Konfiguration des Jobs<hr />
</td>
</tr>
<tr>
<td class="td1">&nbsp;</td>
<td colspan="2" class="td2_3">
<span class="code">&lt;job
&#13;<br />&nbsp;&nbsp;&nbsp;&nbsp;title = "Synchronize Job Chains" <br />&nbsp;&nbsp;&nbsp;&nbsp;order = "
                    yes
                " <br />&nbsp;&nbsp;&nbsp;&nbsp;tasks&nbsp;= "1" 
            &gt;
            <br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;description&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;include file = "jobs/JobSchedulerSynchronizeJobChains.xml"&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;/description&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;params&gt;
      <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;param name="job_chain_state_required_orders" value="1"&gt;
      <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;param name="job_chain_required_orders" value="1"&gt;
      <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;param name="required_orders" value="1"&gt;
      <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;param name="setback_type" value="suspend"&gt;
      <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;param name="setback_interval" value="600"&gt;
      <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;param name="setback_count" value="unbounded"&gt;
    <br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;/params&gt;<br />
<br />
                &nbsp;&nbsp;&nbsp;&nbsp;
            
        &lt;script
        language&nbsp;&nbsp;&nbsp;=&nbsp;"
        java
        "
        <br />
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            java_class&nbsp;=&nbsp;"
            sos.scheduler.job.JobSchedulerSynchronizeJobChains
            "
        
        &gt;
        <br />
                &nbsp;&nbsp;&nbsp;&nbsp;
            
        &lt;/script&gt;
    <br />
            &lt;/job&gt;
        </span>
</td>
</tr>
</table>
<table style="$DisplayStyle" class="box" id="firstRelease_de">
<tr>
<td class="td1">
<span class="section">Releases</span>
</td>
<td class="td2">
<span class="sourceNameBold">1.0</span>
</td>
<td class="td3">
<span class="desc">Version 1.0</span>
</td>
</tr>
<tr>
<td class="td1" />
<td class="td2" />
<td class="td3">
<span class="desc">2009-09-12
                    [
                    letzte &Auml;nderung 2009-09-12
                    ]
                </span>
</td>
</tr>
<tr>
<td class="td1"> </td>
<td class="td2">Autor</td>
<td class="td3">
<span class="desc">Andreas P&uuml;schel  <a class="mail" href="mailto:andreas.pueschel@sos-berlin.com">andreas.pueschel@sos-berlin.com</a>
</span>
</td>
</tr>
<tr>
<td class="td1"> </td>
<td class="td2">Kommentar</td>
<td class="td3">
<span class="desc">
<div>
<p>Initiale Auslieferung</p>
</div>
</span>
</td>
</tr>
</table>
<table style="$DisplayStyle" class="box" id="resources_de">
<tr>
<td class="td1">
<span class="section">Ressourcen</span>
</td>
<td class="td2">Dateien</td>
<td class="td3" />
</tr>
</table>
</div>
<div id="lang_en">
<table width="100%" class="navi">
<tr>
<td nowrap="nowrap">
<a href="#" class="navi" onclick="show_div('documentation','en');return false;">Documentation</a>
                        |
                    <a href="#" class="navi" onclick="show_div('firstRelease','en');return false;">
                            Releases
                        </a>
                        |
                    <a href="#" class="navi" onclick="show_div('resources','en');return false;">Resources</a>
                        |
                    <a href="#" class="navi" onclick="show_div('configuration','en');return false;">Configuration</a>
                        |
                    <a href="#" class="navi" onclick="show_div('all','en');return false;">Show&nbsp;all</a>
</td>
<td style="text-align:center">
<a href="#" class="navi" onclick="genXML('en');return false;">Generate&nbsp;Job</a>&nbsp;&nbsp;</td>
<td style="text-align:right">
<a class="lang" href="javascript:switch_lang('de');">
<img title="deutsch" alt="deutsch" border="0" src="banner_german.gif" />
</a>&nbsp;&nbsp;<a class="lang" href="javascript:switch_lang('en');">
<img title="english" alt="english" border="0" src="banner_english.gif" />
</a>
</td>
</tr>
</table>
<p />
<table class="box" id="documentation_en">
<tr>
<td class="td1">
<span class="section">Documentation</span>
</td>
<td class="td2">&nbsp;</td>
<td class="td3">
<span class="sourceNameBold">JobSchedulerSynchronizeJobChains</span>&nbsp;&nbsp;<span class="desc">Synchronize Job Chains</span>
    <div>
      <b>Functionality</b>
      <br />
      <ul>
<li>
<p>Synchronization</p>
<p>
This job synchronizes orders from multiple job chains that require different time consumption and should be
          synchronized at specific job nodes, i.e. should wait until one order from each job chain arrives. 
          This job supports the following scenario for synchronization:
</p>
<p>          <pre>
          Job Chain   A    B    C
          ------------------------
          Job Node    A1   B1   C1
          Job Node       Merge
          Job Node    A2   B2   C2
          </pre>
</p>
        </li>
<li>
<p>Split &amp; Merge</p>
<p>
You could preceed synchronization with a split operation to achieve a <em>split &amp; merge</em> scenario
          where one job creates three orders for the job chains A, B and C with parallel execution:
</p>
<p>          <pre>
          Job            Split
          ------------------------
          Order       a    b    c
          ------------------------
          Job Chain   A    B    C
          ------------------------
          Job Node    A1   B1   C1
          Job Node       Merge
          Job Node    A2   B2   C2
          </pre>
</p>
        </li>
 <li>
<p>Split &amp; Merge &amp; Split &amp; Merge</p>
<p>
You could preceed synchronization with a split as in the <em>Split &amp; Merge</em> example,
          then split again to run in three parallel jobs and then merge again to finish in just one job.
</p>
<p>          <pre>
          Job            Split
          ------------------------
          Order       a    b    c
          ------------------------
          Job Chain   A    B    C
          ------------------------
          Job Node    A1   B1   C1
          Job Node       Merge1
          Job Node    A2   B2   C2
          Job Node       Merge2
          Job Node    A3
</pre> 
          </p>                 
</li>
<li>
<p>Split &amp; Merge in one chain</p>
<p>
A split &amp; merge can also be performed in only one chain, by setting the split order
          to otherwise unreachable states in the job chain.
</p>
<p>          <pre>                  
          ------------------------
          Job Chain   A    A    A
          ------------------------
          Job Node    A1
          Job Node    B1*                  
          Job Node    C1   C2   C3
          Job Node       Merge
          Job Node    D1
          </pre>
          * At the end of B1 the order is split a described below.

</p>        
        </li>

</ul>
      <b>Explanations</b>
      <ul>
        <li>
          The job chains A, B and C process orders with different time consumtion.
        </li>
        <li>
          Orders from all three job chains should be synchronized at one job node,
          i.e. they should wait until one order from each job chain is present. As long as an order from
          any of the job chains is missing any existing orders are being suspended or set back, i.e. they are waiting
          in front of the <em>Merge</em> job node until the expected orders are complete.
        </li>
        <li>
          Only if one order from each job chain is present then all orders are continued by the <em>Merge</em> job node.
          The sequence in which these orders arrive at the <em>Merge</em> job node is irrelevant.
        </li>
        <li>
          Keep in mind that for JobScheduler the same job can be used in multiple job chains.
        </li>
        <li>
          After the merge, all parallel orders will continue to their next states. If you want to merge into
          just one line of execution again, discontinue all but one Job Chain after the synchronization job.
        </li>
      </ul>
      <br />
      <b>Configuration</b>
      <ul>
        <li>
          Create e.g. a job <em>JobSynchronize</em> from the above implementation like this:
          <pre>
&lt;job order="yes"
     stop_on_error="no"&gt;
    &lt;script java_class="sos.scheduler.job.JobSchedulerSynchronizeJobChains"
            language="java"/&gt;
    &lt;run_time/&gt;
&lt;/job&gt;
          </pre>
        </li>
        <li>
          Add a job node for this synchronization job to each of your job chains like this:
          <pre>
&lt;job_chain orders_recoverable="yes" visible="yes"&gt;
    &lt;job_chain_node state="A1"
                    job="Job1"
                    next_state="synchronize"
                    error_state="error"/&gt;
    &lt;job_chain_node state="synchronize"
                    job="JobSynchronize"
                    next_state="A2"
                    error_state="error"/&gt;
    &lt;job_chain_node state="A2"
                    job="Job2"
                    next_state="success"
                    error_state="error"/&gt;
    &lt;job_chain_node state="success"/&gt;
    &lt;job_chain_node state="error"/&gt;
&lt;/job_chain&gt;
          </pre>
          You can put the synchronization job into an arbitrary job node of each job chain.
          You have to use the same job name for the synchronization job in all job chains,
          however, the job could be placed at different job nodes and associated with different states.
        </li>
        <li>
          For better throughput you could allow the synchronization job to be executed in multiple tasks by specifying:
          <pre>
&lt;job order="yes"
     tasks="3"
     stop_on_error="no"&gt;
     ...
&lt;/job&gt;
          </pre>
          In this sample the synchronization job can be executed with up to 3 instances in parallel.
        </li>
        <li>
          Should you want to force more than one order to be present for one job chain in order to match
          the synchronization criteria then you could specify the number of required orders for that
          job chain by the parameter <code>[job_chain]_required_orders</code>, e.g. <em>A_required_orders</em>
          should the job chain be named <em>A</em>.
        </li>
        <li>
          Should you want different sets of job chains to be synchronized independently then use a different
          synchronization job name for each set of job chains.
        </li>
        <li>
        <p>
          Configuration of a split job
          <p>
          Such a job is used at the beginning of a <em>split &amp; merge</em> scenario and would create multiple orders
          for parallel execution in subsequent job chains like this:
          <pre>
&lt;job&gt;
    &lt;script language="shell"&gt;&lt;![CDATA[
        echo %SCHEDULER_JOB_NAME%
    ]]&gt;&lt;/script&gt;
    &lt;run_time/&gt;
    &lt;commands on_exit_code="success"&gt;
        &lt;order job_chain="ChainA" replace="yes"&gt;
            &lt;params&gt;
                &lt;copy_params from="task"/&gt;
            &lt;/params&gt;
        &lt;/order&gt;
        &lt;order job_chain="ChainB" replace="yes"&gt;
            &lt;params&gt;
                &lt;copy_params from="task"/&gt;
            &lt;/params&gt;
        &lt;/order&gt;
        &lt;order job_chain="ChainC" replace="yes"&gt;
            &lt;params&gt;
                &lt;copy_params from="task"/&gt;
            &lt;/params&gt;
        &lt;/order&gt;
    &lt;/commands&gt;
&lt;/job&gt;
          </pre>
          </p>
          </p>
        </li>
      </ul>
      <br />
      <b>Error Handling</b> 
      <ul>
        <li>
          Keep in mind that orders are suspended for an unlimited duration by the synchronization job until
          orders from all synchronized job chains are present.
        </li>
        <li>
          Should you want orders to fail after a specific delay without being continued then
          you could add that delay to the synchronization job like this:
          <pre>
&lt;job order="yes"
     stop_on_error="no"&gt;
    &lt;params&gt;
      &lt;param name="setback_type" value="setback"/&gt;
    &lt;/params&gt;
    &lt;script java_class="sos.scheduler.job.JobSchedulerSynchronizeJobChains"
            language="java"/&gt;
    &lt;delay_order_after_setback setback_count="1"
                               is_maximum="no"
                               delay="00:10"/&gt;
    &lt;delay_order_after_setback setback_count="12"
                               is_maximum="yes"
                               delay="00:10"/&gt;
    &lt;run_time/&gt;
&lt;/job&gt;
          </pre>
          With this parameterization the lifetime of an order is restricted to the maximum number of setbacks.
          In this example an order is repeatedly processed by the synchronization job after 10 minutes.
          With the 12th repetition being unsuccessful the order will fail and will be continued with the
          job node that is specified by the <em>error_state=</em> attribute of the synchronization job node.
        </li>
      </ul>
    </div>
  </td>
</tr>
</table>
<table class="box" id="job_en">
<tr>
<td class="td1">
<span class="section">Class</span>
</td>
<td class="td2">
<span class="label">Name/ Title</span>
</td>
<td class="td3">
<span class="sourceNameBold">JobSchedulerSynchronizeJobChains</span>&nbsp;&nbsp;<span class="desc">Synchronize Job Chains</span>
</td>
</tr>
<tr>
<td class="td1">&nbsp;</td>
<td onmouseout="hideWMTT()" class="td2" onmouseover="showWMTT('ttorderControl_en')">Order Control<span class="tooltip" id="ttorderControl_en">An order activates the processing of a job chain and contains parameters for one or more jobs in the job chain.</span>
</td>
<td class="td3">
<span class="desc">This job is executed order driven, i.e. it starts automatically if an order is received.</span>
</td>
</tr>
<tr>
<td class="td1">&nbsp;</td>
<td onmouseout="hideWMTT()" class="td2" onmouseover="showWMTT('tttasks_en')">
                        Tasks
                        <span class="tooltip" id="tttasks_en">shows the maximum number of tasks that a job can operate in parallel</span>
</td>
<td class="td3">
<span class="desc">1</span>
</td>
</tr>
<tr>
<td class="td1">&nbsp;</td>
<td onmouseout="hideWMTT()" class="td2" onmouseover="showWMTT('ttScript_en')">Script<span class="tooltip" id="ttScript_en">A script contains the implementation of one or more jobs. Scripts make optional use of the Job Scheduler API methods and are implemented in Java,Javascript, PerlScript or VBScript. Jobs are an alternative to scripts, and can be configured to start programs and executable files.</span>
</td>
<td class="td3">
<ul>
<li>Language: <span class="sourceName">java</span>
</li>
<li>Name of Java Class: <span class="sourceName">sos.scheduler.job.JobSchedulerSynchronizeJobChains</span>
</li>
<li>
<a class="doc" onclick="show_div('resources','en');return false;" href="#1">
<span style="font-family:Arial;font-size:12px;">&rarr;</span>&nbsp;Resource: <span class="sourceName" />
</a>
</li>
</ul>
</td>
</tr>
</table>
<table style="$DisplayStyle" class="box" id="configuration_en">
<tr>
<td class="td1">
<span class="section">Configuration</span>
</td>
<td class="td2">&nbsp;</td>
<td class="td3">&nbsp;</td>
</tr>
<tr>
<td class="td1">
<a name="job_parameter_en" />&nbsp;</td>
<td onmouseout="hideWMTT()" class="td2" onmouseover="showWMTT('ttparams_en')">Parameters</td>
<td class="td3">
<table cellspacing="1" cellpadding="0" class="section">
<tr>
<td class="section1">
<a name="_en" />
<a name="job_chain_state_required_orders_en" />
<a name="job_chain_state_required_orders_" />
<span class="sourceName">job_chain_state_required_orders</span>
</td>
<td class="section2">
<b>No of required orders</b>
</td>
</tr>
<tr>
<td class="section1">
<span class="labelSmall">[optional]</span>
</td>
<td class="section2">
<span class="desc">
						          <b>No of required orders</b>

          <div>
<p>
            This parameter specifies the number of orders that are required to be present for certain state a job chain
            to make orders proceed. Without specification one order is expected to be present.
            </p>
<p>
            If e.g. three orders are specified then three orders from that chain have to be present
            and these three orders will simultaneously proceed having matched the synchronization criteria.
            </p>
<p>
            The name of this parameter is created from the name of the respective job chain, a <em>";"</em>, the
            name of the state and the suffix <em>_required_orders</em>.
          </p>
</div>
        </span>
<p>
<table>
<tr>
<td />
</tr>
<tr>
<td>Default-Value: 1</td>
</tr>
</table>
</p>
</td>
</tr>
<tr>
<td class="section1">
<a name="_en" />
<a name="job_chain_required_orders_en" />
<a name="job_chain_required_orders_" />
<span class="sourceName">job_chain_required_orders</span>
</td>
<td class="section2">
<b>No of required orders</b>
</td>
</tr>
<tr>
<td class="section1">
<span class="labelSmall">[optional]</span>
</td>
<td class="section2">
<span class="desc">
				          <b>No of required orders</b>
          <div>
<p>
            This parameter specifies the number of orders that are required to be present for a job chain
            to make orders proceed. Without specification one order is expected to be present.
            </p>
<p>
            If e.g. three orders are specified then three orders from that chain have to be present
            and these three orders will simultaneously proceed having matched the synchronization criteria.
            </p>
<p>
            The name of this parameter is created from the name of the respective job chain and 
            the suffix <em>_required_orders</em>.
          </p>
</div>
        </span>
<p>
<table>
<tr>
<td>DataType: SOSOptionInteger</td>
</tr>
<tr>
<td>Default-Value: 1</td>
</tr>
</table>
</p>
</td>
</tr>
<tr>
<td class="section1">
<a name="_en" />
<a name="required_orders_en" />
<a name="required_orders_" />
<span class="sourceName">required_orders</span>
</td>
<td class="section2">
<b>No of required orders</b>
</td>
</tr>
<tr>
<td class="section1">
<span class="labelSmall">[optional]</span>
</td>
<td class="section2">
<span class="desc">
				          <b>No of required orders</b>
          <div>
<p>
            This parameter specifies the number of orders that are required to be present for each job chain
            to make orders proceed. Without specification one order is expected to be present.
            </p>
<p>
            If e.g. three orders are specified then three orders from that chain have to be present
            and these three orders will simultaneously proceed having matched the synchronization criteria.
            </p>
<p>
            This parameter is considered only if no parameter <code>[job_chain]_required_orders</code>
            has been specified for the current job chain.
          </p>
</div>
        </span>
<p>
<table>
<tr>
<td />
</tr>
<tr>
<td>Default-Value: 1</td>
</tr>
</table>
</p>
</td>
</tr>
<tr>
<td class="section1">
<a name="_en" />
<a name="setback_type_en" />
<a name="setback_type_" />
<span class="sourceName">setback_type</span>
</td>
<td class="section2">
<b>SetBack Typ</b>
</td>
</tr>
<tr>
<td class="section1">
<span class="labelSmall">[optional]</span>
</td>
<td class="section2">
<span class="desc">
		          <b>SetBack Typ</b>
          <div>
<p>
            This parameter can be used in order to choose between <em>suspend</em> and <em>setback</em>
            for the handling of waiting orders:
            </p>
            <ul>
              <li>
<p>suspend</p>
<p>
                Orders are suspended if the synchronization criteria were not matched. Such orders remain
                in this state for an arbitrary duration provided that they were not continued by the
                synchronization job.
                </p>
<p>
                Alternatively such orders can be continued manually in the Web GUI.
                </p>
              </li>
              <li>
<p>setback</p>
<p>
                Orders are repeatedly executed as specified by the parameters <code>setback_interval</code> and <code>setback_count</code>.
                Should the specified interval and frequency be exceeded then the order enters an error state and
                might leave the job chain.
                </p>
<p>
                Alternatively such orders can be continued manually in the Web GUI.
              </p> </li>
            </ul>
          </div>
        </span>
<p>
<table>
<tr>
<td>DataType: SOSOptionSetBack</td>
</tr>
<tr>
<td>Default-Value: suspend</td>
</tr>
</table>
</p>
</td>
</tr>
<tr>
<td class="section1">
<a name="_en" />
<a name="setback_interval_en" />
<a name="setback_interval_" />
<span class="sourceName">setback_interval</span>
</td>
<td class="section2">
<b>SetBack Intervall</b>
</td>
</tr>
<tr>
<td class="section1">
<span class="labelSmall">[optional]</span>
</td>
<td class="section2">
<span class="desc">
		          <b>SetBack Intervall</b>
          <div>
<p>
            This parameter can be used with the parameter <code>setback_type</code> and its value <em>setback</em>
            to specify the interval in seconds, for which orders are being set back
            that do not match the synchronization criteria.
            </p>
<p>
            By default the <code>setback_type</code> <em>suspend</em> will be used that suspends orders and therefore 
            would not require an interval.
            </p>
<p>
            For better visibility it is recommended to set this value using the element
            &lt;delay _order_after_setback&gt; instead.
          </p>
</div>
        </span>
<p>
<table>
<tr>
<td>DataType: SOSOptionInteger</td>
</tr>
<tr>
<td>Default-Value: 600</td>
</tr>
</table>
</p>
</td>
</tr>
<tr>
<td class="section1">
<a name="_en" />
<a name="setback_count_en" />
<a name="setback_count_" />
<span class="sourceName">setback_count</span>
</td>
<td class="section2" />
</tr>
<tr>
<td class="section1">
<span class="labelSmall">[optional]</span>
</td>
<td class="section2">
<span class="desc">
          <div>
<p>
            This parameter can be used with the parameter <code>setback_type</code> and its value <em>setback</em>
            to specify the maximum number of trials to set back orders 
            that do not match the synchronization criteria.
            </p>
<p>
            By default the <code>setback_type</code> <em>suspend</em> will be used that suspends orders and therefore 
            would not require an interval.
            </p>
<p>
            For better visibility it is recommended to set this value using the element
            &lt;delay _order_after_setback&gt; instead.
          </p>
</div>
        </span>
<p>
<table>
<tr>
<td>DataType: SOSOptionInteger</td>
</tr>
<tr>
<td>Default-Value: unbounded</td>
</tr>
</table>
</p>
</td>
</tr>
</table>
</td>
</tr>
</table>
<table style="$DisplayStyle" class="box" id="genXML_en">
<tr>
<td class="td1">
<span class="section">XML</span>
</td>
<td colspan="2" class="td2_3">Code to configurate the job<hr />
</td>
</tr>
<tr>
<td class="td1">&nbsp;</td>
<td colspan="2" class="td2_3">
<span class="code">&lt;job
&#13;<br />&nbsp;&nbsp;&nbsp;&nbsp;title = "Synchronize Job Chains" <br />&nbsp;&nbsp;&nbsp;&nbsp;order = "
                    yes
                " <br />&nbsp;&nbsp;&nbsp;&nbsp;tasks&nbsp;= "1" 
            &gt;
            <br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;description&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;include file = "jobs/JobSchedulerSynchronizeJobChains.xml"&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;/description&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;params&gt;
      <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;param name="job_chain_state_required_orders" value="1"&gt;
      <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;param name="job_chain_required_orders" value="1"&gt;
      <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;param name="required_orders" value="1"&gt;
      <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;param name="setback_type" value="suspend"&gt;
      <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;param name="setback_interval" value="600"&gt;
      <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;param name="setback_count" value="unbounded"&gt;
    <br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;/params&gt;<br />
<br />
                &nbsp;&nbsp;&nbsp;&nbsp;
            
        &lt;script
        language&nbsp;&nbsp;&nbsp;=&nbsp;"
        java
        "
        <br />
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            java_class&nbsp;=&nbsp;"
            sos.scheduler.job.JobSchedulerSynchronizeJobChains
            "
        
        &gt;
        <br />
                &nbsp;&nbsp;&nbsp;&nbsp;
            
        &lt;/script&gt;
    <br />
            &lt;/job&gt;
        </span>
</td>
</tr>
</table>
<table style="$DisplayStyle" class="box" id="firstRelease_en">
<tr>
<td class="td1">
<span class="section">Releases</span>
</td>
<td class="td2">
<span class="sourceNameBold">1.0</span>
</td>
<td class="td3">
<span class="desc">Version 1.0</span>
</td>
</tr>
<tr>
<td class="td1" />
<td class="td2" />
<td class="td3">
<span class="desc">2009-09-12
                    [
                    last Changes 2009-09-12
                    ]
                </span>
</td>
</tr>
<tr>
<td class="td1"> </td>
<td class="td2">Author</td>
<td class="td3">
<span class="desc">Andreas P&uuml;schel  <a class="mail" href="mailto:andreas.pueschel@sos-berlin.com">andreas.pueschel@sos-berlin.com</a>
</span>
</td>
</tr>
<tr>
<td class="td1"> </td>
<td class="td2">Comment</td>
<td class="td3">
<span class="desc">
<div>
<p>Initial release</p>
</div>
</span>
</td>
</tr>
</table>
<table style="$DisplayStyle" class="box" id="resources_en">
<tr>
<td class="td1">
<span class="section">Resources</span>
</td>
<td class="td2">Files</td>
<td class="td3" />
</tr>
</table>
</div>
</body>
</html>
